group = 'org.pageseeder.ox'

ext {
  globalVersion = file('version.txt').text
  simpleVersion = '2021.2-7'
}

subprojects {
  group   = 'org.pageseeder.ox'
  version = "$globalVersion"

  apply plugin: 'java'

  sourceCompatibility = 1.8
  targetCompatibility = 1.8

  repositories {
    maven { url 'http://dl.bintray.com/pageseeder/maven' }
    jcenter()
    ivy {
      url 'http://ivy.pageseeder.com/shared'
      layout 'pattern', {
        artifact '[organisation]/[module]/[artifact]-[revision](.[ext])'
        ivy '[organisation]/[module]/ivy-[revision].xml'
      }
    }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '4.3.1'
  description 'Generates the Gradle wrapper scripts'
}

task publishAllToBintray (group: "allette"){
  subprojects.each {
    dependsOn("${it.path}:bintrayUpload" )
  }
}

task publishAllToMavenLocal (group: "allette"){
  subprojects.each {
    dependsOn("${it.path}:publishToMavenLocal" )
  }
}
